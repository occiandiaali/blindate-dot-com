{
  "version": 3,
  "sources": ["../src-backend/colyseus.ext.ts"],
  "sourcesContent": ["import http from \"http\";\nimport { Server, Room, Client, ClientState, ClientPrivate, spliceOne, AuthContext } from '@colyseus/core';\n\nexport let allRoomNames: string[] = [];\n\nconst define = Server.prototype.define;\n// @ts-ignore\nServer.prototype.define = function(name, handler, options) {\n    allRoomNames.push(name);\n    return define.call(this, name, handler, options);\n};\n\nconst removeRoomType = Server.prototype.removeRoomType;\nServer.prototype.removeRoomType = function(name) {\n    const removeIndex = allRoomNames.findIndex((roomName) => roomName === name);\n    if (removeIndex !== -1) {\n        spliceOne(allRoomNames, removeIndex);\n    }\n    return removeRoomType.call(this, name);\n};\n\nexport function applyMonkeyPatch() {\n  const _onJoin = Room.prototype._onJoin;\n  Room.prototype._onJoin = async function (client: Client & ClientPrivate, authContext: AuthContext) {\n    const result = await _onJoin.apply(this, [client, authContext]);\n\n    if (client.state === ClientState.JOINING) {\n      const messageTypes = Object.keys(this['onMessageHandlers']).filter((type) => type.indexOf(\"__\") !== 0)\n      client.send(\"__playground_message_types\", messageTypes);\n    }\n\n    return result;\n  }\n}"],
  "mappings": ";AACA,SAAS,QAAQ,MAAc,aAA4B,iBAA8B;AAElF,IAAI,eAAyB,CAAC;AAErC,IAAM,SAAS,OAAO,UAAU;AAEhC,OAAO,UAAU,SAAS,SAAS,MAAM,SAAS,SAAS;AACvD,eAAa,KAAK,IAAI;AACtB,SAAO,OAAO,KAAK,MAAM,MAAM,SAAS,OAAO;AACnD;AAEA,IAAM,iBAAiB,OAAO,UAAU;AACxC,OAAO,UAAU,iBAAiB,SAAS,MAAM;AAC7C,QAAM,cAAc,aAAa,UAAU,CAAC,aAAa,aAAa,IAAI;AAC1E,MAAI,gBAAgB,IAAI;AACpB,cAAU,cAAc,WAAW;AAAA,EACvC;AACA,SAAO,eAAe,KAAK,MAAM,IAAI;AACzC;AAEO,SAAS,mBAAmB;AACjC,QAAM,UAAU,KAAK,UAAU;AAC/B,OAAK,UAAU,UAAU,eAAgB,QAAgC,aAA0B;AACjG,UAAM,SAAS,MAAM,QAAQ,MAAM,MAAM,CAAC,QAAQ,WAAW,CAAC;AAE9D,QAAI,OAAO,UAAU,YAAY,SAAS;AACxC,YAAM,eAAe,OAAO,KAAK,KAAK,mBAAmB,CAAC,EAAE,OAAO,CAAC,SAAS,KAAK,QAAQ,IAAI,MAAM,CAAC;AACrG,aAAO,KAAK,8BAA8B,YAAY;AAAA,IACxD;AAEA,WAAO;AAAA,EACT;AACF;",
  "names": []
}
